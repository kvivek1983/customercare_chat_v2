<ng-container>
  <c-container [fluid]="true" class="header-bar">

    <!-- Hamburger Menu Toggle -->
    <button class="hamburger-btn" (click)="menuToggle.emit()" aria-label="Toggle menu">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>
      </svg>
    </button>

    <!-- Logo -->
    <div class="header-logo">
      <div class="logo-badge">SC</div>
      <div class="logo-text-group">
        <span class="logo-text">Smart Chat</span>
        <span class="logo-version">V2</span>
      </div>
    </div>

    <c-header-nav class="d-none d-md-flex"></c-header-nav>

    <!-- Dashboard Stats Pills -->
    <c-header-nav class="ms-auto d-none d-md-flex align-items-center gap-1">
      <span class="stat-pill stat-pill--active">
        <span class="stat-dot"></span>
        <span class="stat-label">Active</span>
        <span class="stat-count">{{ dashboardStats.active }}</span>
      </span>
      <span class="stat-pill stat-pill--resolved">
        <span class="stat-dot"></span>
        <span class="stat-label">Resolved</span>
        <span class="stat-count">{{ dashboardStats.resolved }}</span>
      </span>
      <span class="stat-pill stat-pill--pending">
        <span class="stat-dot"></span>
        <span class="stat-label">Pending</span>
        <span class="stat-count">{{ dashboardStats.pending }}</span>
      </span>
    </c-header-nav>

    <!-- Executive Status Toggle -->
    <c-header-nav class="d-flex align-items-center mx-2">
      <button class="executive-toggle"
              [class.executive-toggle--online]="executiveStatus === 'ONLINE'"
              [class.executive-toggle--offline]="executiveStatus !== 'ONLINE'"
              (click)="toggleExecutiveStatus()">
        <span class="executive-dot"></span>
        {{ executiveStatus }}
      </button>
    </c-header-nav>

    <!-- Theme Toggle -->
    <c-header-nav class="d-flex align-items-center mx-1">
      <button class="icon-btn" (click)="toggleTheme()" aria-label="Toggle theme">
        <svg *ngIf="!isLightMode" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        <svg *ngIf="isLightMode" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      </button>
    </c-header-nav>

    <!-- Notification Bell -->
    <c-header-nav class="d-flex align-items-center mx-1">
      <div class="icon-btn" style="position: relative;">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
        <span class="notification-badge">3</span>
      </div>
    </c-header-nav>

    <!-- User Avatar + Dropdown -->
    <c-header-nav class="mx-0">
      <ng-container *ngTemplateOutlet="userDropdown" />
    </c-header-nav>

  </c-container>
</ng-container>

<ng-template #userDropdown>
  <c-dropdown [popperOptions]="{ placement: 'bottom-start' }" variant="nav-item">
    <button [caret]="false" cDropdownToggle class="py-0 pe-0" aria-label="Open user menu">
      <div class="user-avatar">{{ userInitials }}</div>
    </button>
    <ul cDropdownMenu class="pt-0 w-auto">
      <li>
        <h6 cDropdownHeader class="bg-body-secondary text-body-secondary fw-semibold py-2 rounded-top">
          Account
        </h6>
      </li>
      <li>
        <a cDropdownItem routerLink="">
          <svg cIcon class="me-2" name="cilUser"></svg>
          Profile
        </a>
      </li>
      <li>
        <hr cDropdownDivider />
      </li>
      <li>
        <a cDropdownItem routerLink="" (click)="logout()">
          <svg cIcon class="me-2" name="cilAccountLogout"></svg>
          Logout
        </a>
      </li>
    </ul>
  </c-dropdown>
</ng-template>
